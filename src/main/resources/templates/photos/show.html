<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Photo</title>

<th:block th:replace="~{fragments :: head}"></th:block>
</head>
<body>
	<!-- HEADER -->
	<!-- <header th:replace="~{fragments :: header}"></header> -->
	
	<!-- MAIN -->
	<main class="container">
		<!-- Torna alla Home -->
		<a th:href="@{/}" class="my-3 d-inline-block btn btn-outline-primary">
			Go to Photos &nbsp;<i class="fa fa-right-from-bracket"></i>
		</a>
		<!-- Edit -->
		<a th:href="@{/photos/edit/{id} (id=${photo.id})}" class="btn btn-outline-success">
   			Edit <i class="fa-regular fa-pen-to-square"></i>
   		</a>
   		<!-- Delete -->
      	<form action="#" th:action="@{/photos/delete/{id}(id=${photo.id})}" method="post" 
      		  class="d-inline-block">
      		<button type="submit" id="submitButton" class="btn btn-outline-danger">
      			Delete <i class="fa fa-trash-alt"></i>
      		</button>
      	</form>
		
		<h1 th:text="${photo.title}" class="text-center my-5"></h1>
		<div class="row">
			<div class="ms-auto col-6">
				<img th:alt="${photo.title}" th:src="@{${photo.url}}" class="mb-3" width="100%">
				<h4>Description</h4>
				<p>[[${photo.description}]]</p>
			</div>
			<div class="me-auto col-4">
				<a th:href="@{|/categories/create?photoId=${photo.id}|}" 
				   class="my-3 d-inline-block btn btn-primary">
					Insert a new Category
				</a>
			
				<h4>Categorie</h4>
				<div th:if="${photo.categories.size()<=0}" class="mb-5">Non ci sono categorie</div>
				<table th:if="${photo.categories.size()>0}" class="table table-hover align-middle">
					<thead>
					    <tr>
					      <th scope="col">#</th>
					      <th scope="col">Name</th>
					    </tr>
			  		</thead>

					<tbody>
					    <tr th:each="category : ${photo.categories}">
					      <td>[[${category.id}]]</td>
					      <td>[[${category.name}]]</td>
					      <td>
							<a th:href="@{/categories/edit/{id} (id=${category.id})}" class="btn btn-success">
				      			<i class="fa-regular fa-pen-to-square"></i>
				      		</a>
					      	<form th:action="@{/categories/delete/{id} (id=${category.id})}" method="post" class="d-inline-block">
					      		<button type="submit" id="submitButton" class="btn btn-danger">
					      			<i class="fa fa-trash-alt"></i>
					      		</button>
					      	</form>
					      </td>
					    </tr>
				  	</tbody>
				</table>
				
				<!-- Tag -->
				<h4 class="mt-5">Tag</h4>
				<div>[[${photo.tag}]]</div>
			</div>
		</div>
	</main>
	
	<!-- Scripts -->
	<div th:replace="~{fragments :: scripts}"></div>
</body>
</html>